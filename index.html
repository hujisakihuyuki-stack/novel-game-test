<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ミニノベルゲーム</title>
<style>
  body { margin:0; background-color:#000; display:flex; justify-content:center; align-items:center; height:100vh; }
  #game { width:800px; height:450px; position:relative; overflow:hidden; border:2px solid #444; background-color:#000; }
  #background { position:absolute; width:100%; height:100%; object-fit:cover; z-index:1; }
  #character { position:absolute; bottom:0; left:50%; transform:translateX(-50%); height:90%; z-index:10; }
  #text-box { position:absolute; bottom:0; width:100%; background:rgba(0,0,0,0.6); color:#fff; padding:10px; box-sizing:border-box; font-size:18px; z-index:20; }
  #choices { position:absolute; bottom:80px; width:100%; text-align:center; z-index:20; }
  .choice-btn { margin:5px; padding:8px 16px; font-size:16px; cursor:pointer; }
</style>
</head>
<body>
<div id="game">
  <img id="background" src="background-test.png" alt="背景">
  <img id="character" src="character-test.png" alt="キャラ">
  <div id="text-box">さあ、ゲームスタート！どっちに進む？</div>
  <div id="choices">
    <button class="choice-btn" data-choice="1">選択肢1</button>
    <button class="choice-btn" data-choice="2">選択肢2</button>
  </div>
</div>

<script>
const story = [
  { text:"ステップ1：道を選んでください。", choices:["左に進む","右に進む"] },
  { text:"ステップ2：さらに選択肢です。", choices:["建物に入る","森に進む"] },
  { text:"ステップ3：最後の選択肢。", choices:["話しかける","無視する"] },
  { text:"これで分岐終了！お疲れさま。", choices:[] }
];

let step = 0;

// 選択肢ボタンを更新
function updateChoices() {
  const choicesDiv = document.getElementById('choices');
  choicesDiv.innerHTML = "";
  story[step].choices.forEach((choiceText, index) => {
    const btn = document.createElement('button');
    btn.innerText = choiceText;
    btn.className = "choice-btn";
    btn.onclick = () => choose(index+1);
    choicesDiv.appendChild(btn);
  });
}

// 選択肢を選んだときの処理
function choose(n){
  console.log(`ステップ${step+1} 選択肢 ${n} を選択`);
  step++;
  if(step < story.length){
    document.getElementById('text-box').innerText = story[step].text;
    if(story[step].choices.length > 0){
      updateChoices();
    } else {
      document.getElementById('choices').innerHTML = "";
    }
  } else {
    document.getElementById('text-box').innerText = story[story.length-1].text;
    document.getElementById('choices').innerHTML = "";
  }
}

// 最初の選択肢をセット
updateChoices();
</script>
</body>
</html>
