<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ノベルゲームサンプル</title>
<style>
  body {
    margin: 0;
    background-color: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  #game {
    width: 800px;
    height: 450px; /* 16:9 */
    background-color: #000;
    position: relative;
    overflow: hidden;
    border: 2px solid #444;
  }
  #background {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1;
  }
  #character {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    height: 90%; /* 立ち絵の高さ */
    z-index: 10; /* 背景より前に出す */
  }
  #text-box {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: rgba(0,0,0,0.6);
    color: #fff;
    padding: 10px;
    box-sizing: border-box;
    font-size: 18px;
    z-index: 20;
  }
  #choices {
    position: absolute;
    bottom: 80px;
    width: 100%;
    text-align: center;
    z-index: 20;
  }
  .choice-btn {
    margin: 5px;
    padding: 8px 16px;
    font-size: 16px;
  }
</style>
</head>
<body>
<div id="game">
  <!-- ここをアップロードした背景・キャラのファイル名に変更 -->
  <img id="background" src="background-test.jpg" alt="背景">
  <img id="character" src="character-test.png" alt="キャラ">
  
  <div id="text-box">こんにちは！これはサンプルのテキストです。</div>
  <div id="choices">
    <button class="choice-btn" onclick="choose(1)">選択肢1</button>
    <button class="choice-btn" onclick="choose(2)">選択肢2</button>
  </div>
</div>

<script>
let step = 0;
let firstChoice = 0;
let secondChoice = 0;

function choose(n){
  step++;
  
  if(step === 1){
    firstChoice = n;
    document.getElementById('text-box').innerText = "1回目の選択肢を選びました";
    updateChoices("A","B");
    
  } else if(step === 2){
    secondChoice = n;
    if(firstChoice === 1){ // Aを選んでいた場合
      document.getElementById('text-box').innerText = "2回目の選択肢を選びました（A系）";
      updateChoices("A-1","A-2");
    } else { // Bを選んでいた場合
      document.getElementById('text-box').innerText = "2回目の選択肢を選びました（B系）";
      updateChoices("B-1","B-2");
    }
    
  } else if(step === 3){
    let result = "";
    if(firstChoice === 1 && secondChoice === 1){ // A-1
      result = (n===1)?"A-1a":"A-1b";
    } else if(firstChoice === 1 && secondChoice === 2){ // A-2
      result = (n===1)?"A-2a":"A-2b";
    } else if(firstChoice === 2 && secondChoice === 1){ // B-1
      result = (n===1)?"B-1a":"B-1b";
    } else { // B-2はランダム
      let goals = ["A-1a","A-1b","A-2a","A-2b","B-1a","B-1b","B-2c"];
      result = goals[Math.floor(Math.random() * goals.length)];
    }

    document.getElementById('text-box').innerText = `ゴール: ${result}`;
    document.getElementById('choices').innerHTML = ""; // 選択肢を消す
  }
}

function updateChoices(opt1, opt2){
  document.getElementById('choices').innerHTML = `
    <button class="choice-btn" onclick="choose(1)">${opt1}</button>
    <button class="choice-btn" onclick="choose(2)">${opt2}</button>
  `;
}
</script>


</body>
</html>
